<div class="container">
  <button *ngIf="publications[0]" (click)="postAllPublications()" type="button"
    class="excel btn  btn-outline-dark animate__animated  animate__backInDown">Post all
    publications</button>

  <button *ngIf="publications[0]" (click)="exportFile()" type="button"
    class="excel btn btn-outline-success animate__animated  animate__backInDown">Generate
    Excel</button>

  <button (click)="exportFilefromStorage()" type="button"
    class="excel btn btn-outline-warning animate__animated  animate__backInDown">Generate
    Excel from storage</button>

  <div class="row input-group" style="margin: 10px 0 0 0;">
    <label for="">Choose a year for the Phase:</label>
    <select name="phaseYear" id="phaseYear" style="margin: 0 10px; width: 10%; color: #575E65; outline: none; border-radius: 3px; background: #E9ECEF; border-color: #CED4DA;">
      <option value="2021">2021</option>
      <option value="2020">2020</option>
    </select>
  </div>

  <div class="row input-group mb-3 " style="margin-bottom: 10px;" *ngIf="publications[0]">
    <div class="col-12 animate__animated animate__bounceInDown" style="margin: 10px 0;">
      <ul class="list-group">
        <li class="list-group-item list-group-item-dark d-flex justify-content-between align-items-center">
          Total publications
          <span class="badge badge-primary badge-pill">{{publications.length}}</span>
        </li>
      </ul>
    </div>

    <div class="col-6 animate__animated  animate__bounceInLeft">
      <ul class="list-group">
        <li class="list-group-item list-group-item-danger d-flex justify-content-between align-items-center">
          Without creating
          <span class="badge badge-danger badge-pill">{{rest}}</span>
        </li>
        <li class="list-group-item list-group-item-success d-flex justify-content-between align-items-center">
          With code
          <span class="badge badge-success badge-pill">{{publications.length - rest}}</span>
        </li>
      </ul>
    </div>

    <div class="col-6 animate__animated  animate__bounceInRight">
      <ul class="list-group">
        <li class="list-group-item list-group-item-danger d-flex justify-content-between align-items-center">
          without accepting
          <span class="badge badge-danger badge-pill">{{WoAcept}}</span>
        </li>
        <li class="list-group-item list-group-item-success d-flex justify-content-between align-items-center">
          Accepted
          <span class="badge badge-success badge-pill">{{publications.length - WoAcept}}</span>
        </li>
      </ul>
    </div>
  </div>

  <div class="input-group mb-3 animate__animated  animate__shakeY animate__delay-1s" style="margin-top: 10px;">
    <div class="input-group-prepend">
      <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
    </div>
    <div class="custom-file">
      <input (change)="onFileChange($event)" type="file"
        accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
        class="custom-file-input" id="inputGroupFile01" aria-describedby="inputGroupFileAddon01">
      <label class="custom-file-label" for="inputGroupFile01">Choose file</label>
    </div>
  </div>

  <table class="table animate__animated animate__fadeInTopRight">
    <thead>
      <tr>
        <th scope="col">Publication ID</th>
        <th scope="col">Publication Title</th>
        <th scope="col">Accepted</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let publication of publications; let i = index" class=" animate__animated "
        [ngClass]="{'animate__slideInLeft': i%2 ==0,'animate__slideInRight': i%2 !=0}">
        <td>{{publication.IDRequest || "null"}}</td>
        <td class="animate__animated" [ngClass]="
        {
          'error': publication.IDRequest == undefined ,
          'success animate__zoomIn': publication.IDRequest != undefined 
        }">{{publication.title || "null"}}</td>
        <td class="animate__animated"
          [ngClass]="{'error': !publication.Accepted, 'success animate__zoomIn': publication.Accepted}">
          {{publication.Accepted || "null"}}</td>
      </tr>
    </tbody>
  </table>
</div>

<div class="containerGray" *ngIf="((rest)==0 || (WoAcept)==0) && viewinfo">
  <div class="containerInfo">
    <h1 *ngIf="(rest)==0 " class="animate__animated  animate__heartBeat">All publications <span
        style="color: rgb(90, 153, 248);">created</span> </h1>
    <h1 *ngIf="(WoAcept)==0 " class="animate__animated  animate__heartBeat">All publications <span
        class="success">accepted</span> </h1>
    <button (click)="viewinfo = false" type="button"
      class="btn btn-outline-light btn-lg btn-block animate__animated animate__bounce animate__delay-2s"
      style="margin-top: 100px;">Close</button>
  </div>
</div>